<!--
Code is based on the Escape time algorithm pseudo code at
http://en.wikipedia.org/wiki/Mandelbrot_set
-->
<html>
<style>
    #canvas {
        height: 480px;
        width: 640px;        
    }
</style>
<canvas id="canvas">
</canvas>
<script>
(function() {
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");
    var width = canvas.width;
    var height = canvas.height;

    var id = ctx.createImageData(width, height);
    var d  = id.data;
    putPixel = function (x, y, r, g, b, a) {
        var index = (x + y * width) * 4;
        d[index+0] = r;
        d[index+1] = g;
        d[index+2] = b;
        d[index+3] = a;
    }
    var x0;
    var y0;
    var xmin = -2.3;
    var ymin = -1.0;
    var xmax = 0.8;
    var ymax = 1.0;
    var x;
    var y;
    var iteration;
    var max_iteration = 256;
    var xtemp;
    for (var Px = 0; Px < width; Px++) {
        x0 = xmin + Px * (xmax-xmin) / width;
        for (var Py = 0; Py < height; Py++) {
            y0 = ymin + Py * (ymax-ymin) / height;
            x = 0.0;
            y = 0.0;
            iteration = 0;
            while ( x*x + y*y < 4 && iteration < max_iteration )
            {
                xtemp = x*x - y*y + x0;
                y = 2*x*y + y0;
                x = xtemp;
                iteration = iteration + 1;
            }
            putPixel(Px, Py, iteration, iteration, iteration, 255);
        }    
    }
    ctx.putImageData(id, 0, 0);
})();
</script>
</html>
